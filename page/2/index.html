<!DOCTYPE html>

<html>

<!-- -->
<head>
  <meta charset="utf-8">
  
  <title>YSP AND HLL</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="YSP AND HLL">
<meta property="og:url" content="http://theysp.github.io/page/2/index.html">
<meta property="og:site_name" content="YSP AND HLL">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="YSP AND HLL">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
  

</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">YSP AND HLL</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
        <a id="nav-search-btn" class="nav-icon" title="Rechercher"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://theysp.github.io"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-2017-8-14-Opengl" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/08/14/2017-8-14-Opengl/" class="article-date">
  <time datetime="2017-08-14T12:28:06.000Z" itemprop="datePublished">2017-08-14</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/技术积累/">技术积累</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/08/14/2017-8-14-Opengl/">GLFW多上下文与多线程资源读取</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>感觉不惧英文后，能在网上找到很多更笃定、更自信的回答。</p>
<p>由于三维编程需要读取大量的资源，但是不能让窗口干等着啊，所以打算起新线程来读资源，主线程根据读取进度进行不同程度的渲染。</p>
<h2 id="底层Opengl的API支持"><a href="#底层Opengl的API支持" class="headerlink" title="底层Opengl的API支持"></a>底层Opengl的API支持</h2><p>Opengl是通过context间共享资源实现多线程加载的。虽然官方不太推荐，但是好歹给了一个方法。</p>
<h2 id="GLFW封装的方法"><a href="#GLFW封装的方法" class="headerlink" title="GLFW封装的方法"></a>GLFW封装的方法</h2><p>但是我这从头学起的工程，都是基于GLFW编的，所以我就找了一圈，找到一个老司机的答案：</p>
<p><a href="https://www.opengl.org/discussion_boards/showthread.php/184813-Creating-multiple-OpenGL-contexts-with-GLFW-on-different-threads" target="_blank" rel="external">一老司机的回答</a></p>
<blockquote>
<p>Make a second invisible window that has the main window as the parent (the last parameter is for list sharing)<br>E.g.: GLUtil::_loaderWindow = glfwCreateWindow(1, 1, “whatever”, nullptr, GLUtil::_mainWindow);<br>Create another thread and in its run()(or whatever) method call this: glfwMakeContextCurrent(GLUtil::_loaderWindow);</p>
<p>If you are using GLEW, build GLEW with the GLEW_MX define and call init() in the second thread as well. Read up on GLEW_MX about multithreaded usage. I strongly recommend boost thread specific pointers for this.</p>
<p>Remember to destroy the second window just like the main one. That’s it. I’ve been using this method for background resource loading for years and haven’t ran into any issues.</p>
<p>Hope it helps.</p>
</blockquote>
<p>大意是直接用glfw通过与原上下文共享的方式创建新上下文即可，把新出现的窗口隐藏就行了。<br>然后主线程用主上下文，在资源读取线程中，将新的上下文设置为当前上下文即可。由于在创建时新的上下文使用了GLFWWindow作为最后一个参数，即与原上下文共享了列表（sharelist,一大堆显卡相关的东西），所以在使用新的上下文线程中可以进行shader编译、texture读取等等操作。</p>
<p>好吧，老司机说这么多年都这么过来了，我决定听老司机的了。</p>
<h2 id="需要注意的事项"><a href="#需要注意的事项" class="headerlink" title="需要注意的事项"></a>需要注意的事项</h2><ol>
<li>OpenGL不允许在不同的context下共享顶点缓存（VAO）。<br>所以顶点缓存还需要在主线程中创建。<br>目前在线程中做的主要是将纹理的读取和处理放在非主线程中了。用c++11的std::thread非常方便，爱上新标准了。</li>
<li>在Load线程结束时需要加一句glfwMakeContextCurrent(mainWindow);具体原因还需要再看一下。</li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://theysp.github.io/2017/08/14/2017-8-14-Opengl/" data-id="cj8d4zlhu001ntkg683o3fwd4" class="article-share-link">Partager</a>
      
        <a href="http://theysp.github.io/2017/08/14/2017-8-14-Opengl/#disqus_thread" class="article-comment-link">Commentaires</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/opengl/">opengl</a></li></ul>

    </footer>
  </div>
  
</article>






  
    <article id="post-2017-8-9-GLSL" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/08/10/2017-8-9-GLSL/" class="article-date">
  <time datetime="2017-08-10T08:48:05.000Z" itemprop="datePublished">2017-08-10</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/技术积累/">技术积累</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/08/10/2017-8-9-GLSL/">OpenGL Shading Language(GLSL)概览</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>翻了很久的learnopengl，快到结尾了，终于感觉入门了的感觉。<br>整个教程除了OpenGL的入门，反反复复介绍的就是利用shader进行各种花式渲染。<br>那么聪明如我的读者肯定就知道了，图形编程的关键是深入到shader编程，通过其提升渲染效率及提供高级渲染效果。</p>
<p>在<a href="https://learnopengl.com/#!In-Practice/Debugging" target="_blank" rel="external">教程的Debugging</a>一节，打开了一扇门，其中提到了不同的显卡厂商在驱动中带的GLSL编译器的标准是略不同的。<br>NVIDIA比AMD要求松一些，适当兼容了不在OpenGL中不包含的情况，所以可能出现NVIDIA上的shader编译无问题的情况在AMD显卡上无法运行的情况。所以就有这样一个标准的<a href="https://www.khronos.org/opengles/sdk/tools/Reference-Compiler/" target="_blank" rel="external">Shader检查器(GLSL reference compiler)</a>。良心啊，开源的，关键是显卡厂商就是不愿意统一，和JS、CSS等问题感觉类似。</p>
<h2 id="各式各样的shader"><a href="#各式各样的shader" class="headerlink" title="各式各样的shader"></a>各式各样的shader</h2><p>有这样一系列的shader类型：<br>.vert - a vertex shader<br>.tesc - a tessellation control shader<br>.tese - a tessellation evaluation shader<br>.geom - a geometry shader<br>.frag - a fragment shader<br>.comp - a compute shader</p>
<p>其中，有一个比较特别的compute shader，细看之下应该就是OpenCL一类的底层吧，难怪NVIDIA这么厉害了，在GLSL标准外额外支持了一系列的API，然后就在并行计算上胜了AMD一招。</p>
<p>这个compute shader是脱离在GL的渲染流程之外的，是单独的<a href="https://www.khronos.org/opengl/wiki/GLAPI/glDispatchCompute" target="_blank" rel="external">glDispatchCompute</a>函数对其执行的调用。问题是这个和opencl有什么关系呢？之后还得再看看，如果opencl足够好用了，这个感觉也没多大意思了。</p>
<h2 id="项目的背景图案"><a href="#项目的背景图案" class="headerlink" title="项目的背景图案"></a>项目的背景图案</h2><p>经过两日的努力，终于做出了比较炫的地球了，这下项目界面的背景终于有着落了</p>
<p><img src="http://7yusyv.com1.z0.glb.clouddn.com/2017-08/eearth_clip1.gif" alt="地球"></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://theysp.github.io/2017/08/10/2017-8-9-GLSL/" data-id="cj8d4zli3001utkg63v4add9a" class="article-share-link">Partager</a>
      
        <a href="http://theysp.github.io/2017/08/10/2017-8-9-GLSL/#disqus_thread" class="article-comment-link">Commentaires</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/opengl/">opengl</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/并行计算/">并行计算</a></li></ul>

    </footer>
  </div>
  
</article>






  
    <article id="post-2017-8-5-safty-training" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/08/05/2017-8-5-safty-training/" class="article-date">
  <time datetime="2017-08-05T18:34:04.000Z" itemprop="datePublished">2017-08-05</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/法国生活/">法国生活</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/08/05/2017-8-5-safty-training/">ITER的安全培训</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>为了能够参加ITER工地的参观，我参加了ITER的安全培训。International。</p>
<p>培训的老师是一位工程经验丰富的法国大叔。强健的体魄，修身的蓝体恤和红牛仔裤，黑底与亮绿色边框的手机壳。<span style="color:#ffff9f; background-color:black">To whom that thinks I am 25, I am not, I am double of that.”.</span></p>
<p>参加培训的有新员工，有合同承包商，有工地的工人。法国人、意大利人、英国人、美国人、中国人等等。</p>
<p>整个过程学习了。<br>比如：</p>
<h2 id="Color-Code"><a href="#Color-Code" class="headerlink" title="Color Code"></a>Color Code</h2><p><span style="color:#00ff00; background-color:#00ff00">绿</span><span style="color:#fffffff; background-color:#fffffff">白</span><span style="color:#00ff00; background-color:#00ff00">绿</span><span style="color:#fffffff; background-color:#fffffff">白</span>：表示信息</p>
<p><span style="color:#ff0000; background-color:#ff0000">红</span><span style="color:#fffffff; background-color:#fffffff">白</span><span style="color:#ff0000; background-color:#ff0000">红</span><span style="color:#fffffff; background-color:#fffffff">白</span>：表示禁止</p>
<p><span style="color:#0000ff; background-color:#0000ff">蓝</span><span style="color:#fffffff; background-color:#fffffff">白</span><span style="color:#0000ff; background-color:#0000ff">蓝</span><span style="color:#fffffff; background-color:#fffffff">白</span>：表示强制的</p>
<p><span style="color:#000000; background-color:black">黑</span><span style="color:#fffff00; background-color:#fffff00">黄</span><span style="color:#000000; background-color:black">黑</span><span style="color:#fffff00; background-color:#fffff00">黄</span>：表示警告</p>
<h2 id="服装颜色之类的"><a href="#服装颜色之类的" class="headerlink" title="服装颜色之类的"></a>服装颜色之类的</h2><p>各色头盔、各色背心在工地上是不同的角色，对于小组boss，应该有醒目的颜色，这样吊车操作等等人员就能清晰地知道是谁在指挥了。<br>不由得想起这样得协议性得东西在人得头脑中理解再转发确实恨低效啊，想到如果精确如机器能够瞬间搭建合理得工作协议，AI一出人类在效率上还怎么比得过。</p>
<h2 id="天津爆炸事件"><a href="#天津爆炸事件" class="headerlink" title="天津爆炸事件"></a>天津爆炸事件</h2><p>天津爆炸事件影响范围还是很广的。培训的过程中，讲师最常说的话是：“accident is expensive, if you don’t beleave, try accident.” 对于ITER的安全工作，他作为负责人相当自豪，目前还是零事故哦。</p>
<h2 id="不允许用梯子"><a href="#不允许用梯子" class="headerlink" title="不允许用梯子"></a>不允许用梯子</h2><p>那还能不用梯子？在这里一定高度的作业必须用电动升降机，不允需要人扶的梯子。不由感慨发达国家还是略先进啊。</p>
<h2 id="禁止抽烟"><a href="#禁止抽烟" class="headerlink" title="禁止抽烟"></a>禁止抽烟</h2><p>ITER现在整个厂区都不允许抽烟了！天台、阳台、办公室、走廊、厕所统统禁烟。<br>一是安全，另一方面他给我们语重心长地讲了抽烟对小孩不好，对环境不好。<br>他：你们了解不，你丢地每个烟屁股会污染多少水？<br>答：2~3升？<br>他：错！整整300~400升啊。你们知不知道，全法国一年要丢多少烟屁股？那位同学说的接近了，不止5000万，是整整5400万啊同学们。你以为大家丢大街上就不污染水啦？大雨一下，噗，自己算吧。这里有谁抽烟不？有儿女不？赶紧地戒了吧。</p>
<p>我给大叔点个赞。</p>
<h2 id="发达国家的环保意识"><a href="#发达国家的环保意识" class="headerlink" title="发达国家的环保意识"></a>发达国家的环保意识</h2><p>这里进出工地的车子，在出工地前，是要通过一个洗轮胎的机器的，也不复杂，就是下面这个样子的：</p>
<p><img src="http://7yusyv.com1.z0.glb.clouddn.com/2017-08/车胎清晰器.png" alt=""></p>
<p>但是！很遗憾，这一次没有时间去参观了，再等到秋高气爽时再去咯。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://theysp.github.io/2017/08/05/2017-8-5-safty-training/" data-id="cj8d4zlhx001qtkg6eetynk7c" class="article-share-link">Partager</a>
      
        <a href="http://theysp.github.io/2017/08/05/2017-8-5-safty-training/#disqus_thread" class="article-comment-link">Commentaires</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/ITER/">ITER</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/法国生活/">法国生活</a></li></ul>

    </footer>
  </div>
  
</article>






  
    <article id="post-2017-7-29-imgui-tips" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/07/29/2017-7-29-imgui-tips/" class="article-date">
  <time datetime="2017-07-29T08:48:05.000Z" itemprop="datePublished">2017-07-29</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/技术积累/">技术积累</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/07/29/2017-7-29-imgui-tips/">IMGUI用法小结</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>在本文中，“窗口”imgui在操作系统提供的窗口中创建的img界面容器。<br>“控件”指imgui在“窗口”中创建的界面元素。</p>
<h2 id="字体导入与使用"><a href="#字体导入与使用" class="headerlink" title="字体导入与使用"></a>字体导入与使用</h2><p>由于是国内的项目，需要使用中文字体，因此借鉴<a href="https://github.com/ocornut/imgui" target="_blank" rel="external">imgui主页</a>的例子。<br><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">ImGuiIO&amp; io = ImGui::GetIO();</div><div class="line">io.Fonts-&gt;AddFontFromFileTTF(<span class="string">"ArialUni.ttf"</span>, <span class="number">18.0f</span>, <span class="literal">NULL</span>, io.Fonts-&gt;GetGlyphRangesJapanese());</div><div class="line"></div><div class="line"><span class="comment">// For Microsoft IME, pass your HWND to enable IME positioning:</span></div><div class="line">io.ImeWindowHandle = my_hwnd;</div></pre></td></tr></table></figure></p>
<p><img src="https://raw.githubusercontent.com/wiki/ocornut/imgui/web/code_sample_01_jp.png" alt=""><br>可以实现相应的中文输入。</p>
<p>基本上imgui也是个状态机，字体的颜色、窗口的背景等等均可通过PushStyle和PosStyle实现，所以以往接触过opengl立即模式的话应该很快能理解。</p>
<p>目前imgui没有实现运行时字体动态大小切换功能，一个比较费事的方法是在导入字体时生成多种大小的字体，在程序运行中通过PushFont和PopFont实现。<br>此外，imgui可支持子界面的缩放，适当运用也可以缓解字体缩放的困难，如<a href="https://github.com/ocornut/imgui/issues/772#issuecomment-244512595" target="_blank" rel="external">#772 (comment)</a>所示。</p>
<h2 id="UI排版"><a href="#UI排版" class="headerlink" title="UI排版"></a>UI排版</h2><p>主要是从<a href="http://blog.csdn.net/sunny__chen/article/details/51273726" target="_blank" rel="external">参考文章</a>中获取的信息。<br>imgui的排版建议开始按自动的来。<br>自动布局时，默认情况下，各控件由上到下依次显示。<br>可以使用GUILayout.BeginHoriztontal(),GUILayout.EndHorizontal(), GUILayout.BeginVertical(), and GUILayout.EndVertical().来控制各控件水平显示或垂直显示。可嵌套。</p>
<p>关于UI在主窗口的停靠，目前官方没有出排版套路，但是一些用户给出了解决方法。</p>
<p>目前我的做法是直接把子界面的位置固定在窗口内，只做一个隐藏弹出的切换。</p>
<h2 id="c-11支持utf8-vs2017-community"><a href="#c-11支持utf8-vs2017-community" class="headerlink" title="c++11支持utf8 + vs2017 community"></a>c++11支持utf8 + vs2017 community</h2><p>支持utf8了！再也不用与编码纠缠了，再见GTK，再见GB。</p>
<h2 id="imgui窗口的定位"><a href="#imgui窗口的定位" class="headerlink" title="imgui窗口的定位"></a>imgui窗口的定位</h2><p>imgui所有的定位坐标都是相对于操作系统提供的总体窗口的。<br>imgui提供了一系列的函数用于窗口定位：<br>    IMGUI_API ImVec2        GetContentRegionMax();       //窗口右下角坐标（含需要滚动条才能到达的区域）<br>    IMGUI_API ImVec2        GetContentRegionAvail();     //窗口尺寸<br>    IMGUI_API float         GetContentRegionAvailWidth();//窗口尺寸宽度<br>    IMGUI_API ImVec2        GetWindowContentRegionMin(); //窗口左上角坐标<br>    IMGUI_API ImVec2        GetWindowContentRegionMax(); //窗口<br>    IMGUI_API float         GetWindowContentRegionWidth();<br>以及ImGui::GetIO().DisplaySize用于获得总体窗口的尺寸（在总体窗口缩放时会用到）。</p>
<h2 id="隐去windows窗口标题栏"><a href="#隐去windows窗口标题栏" class="headerlink" title="隐去windows窗口标题栏"></a>隐去windows窗口标题栏</h2><p>原文来自：<a href="http://bbs.csdn.net/topics/370099236" target="_blank" rel="external">http://blog.csdn.net/LYP951018/article/details/24503207</a></p>
<blockquote>
<p>————————以下为原文——————————<br>case WM_SIZE:<br>   {<br>       LONG_PTR Style = ::GetWindowLongPtr(hWnd,GWL_STYLE);<br>       Style = Style &amp;~WS_CAPTION &amp;~WS_SYSMENU &amp;~WS_SIZEBOX;<br>       ::SetWindowLongPtr(hWnd, GWL_STYLE, Style);<br>       break;<br>   }</p>
</blockquote>
<p>## </p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://theysp.github.io/2017/07/29/2017-7-29-imgui-tips/" data-id="cj8d4zlho001jtkg6x6pgiz7b" class="article-share-link">Partager</a>
      
        <a href="http://theysp.github.io/2017/07/29/2017-7-29-imgui-tips/#disqus_thread" class="article-comment-link">Commentaires</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/opengl/">opengl</a></li></ul>

    </footer>
  </div>
  
</article>






  
    <article id="post-2017-07-26-Cooking" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/07/26/2017-07-26-Cooking/" class="article-date">
  <time datetime="2017-07-26T18:03:39.000Z" itemprop="datePublished">2017-07-26</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/法国生活/">法国生活</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/07/26/2017-07-26-Cooking/">论怎么花10分钟做出两天的饭</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>出来了，感觉整天有好多东西需要学的，那么剩下做饭的时间就不多了哦。</p>
<p>上周开始时，我还尝试炒两个菜烧个汤，但是整下来大概要花大半个小时，还需要一直盯着，这样可不行啊，等我吃完坐下来开始写东西或者看东西时，已经只有2个小时了。<br>我开始琢磨怎么在不降低生活水平，不多花钱的情况下，<b>用最少的时间烧今晚和明天中午的饭</b>。</p>
<p>我开始去城西最大的casino超市逛起来了。。。</p>
<p>然后就知道了怎么做了。</p>
<p>第一次用力过猛做太多了，但是味道还是挺赞的，结果第二天中午吃的有点撑。不要问我为什么一定要吃完，你自己做过饭就懂了。</p>
<h2 id="这一锅用力过猛的料理就是："><a href="#这一锅用力过猛的料理就是：" class="headerlink" title="这一锅用力过猛的料理就是："></a>这一锅用力过猛的料理就是：</h2><p><img src="http://7yusyv.com1.z0.glb.clouddn.com/2017-07/ylgm.jpg" alt="虾仁青椒盖红烧肉饭"></p>
<p>步骤如下，以飨各位在异国过在国内的同志</p>
<ul>
<li>老套路烧红烧肉，但是不必收汤，这点汤有点用的。嗯，只需要开头5分钟在，焖的10~20分钟该干嘛干嘛。</li>
<li>趁汤还在，米下锅，注意根据最后想要的米饭的软硬调整米和汤的比例。这个确实不好掌握。我主要是通过抽样方法，一勺子下锅捞出来米汤比例合适就OK了。嗯，又只需要2~3分钟。</li>
<li>为了拍照好看，等饭成型了，剥几个虾仁，切点蔬菜点缀到饭上面。嗯，要是有我这么熟练的刀工，只需要2~3分钟。</li>
</ul>
<p>以上，10分钟一大锅哦，可惜只有我独享。</p>
<h2 id="法国的冰淇凌好便宜"><a href="#法国的冰淇凌好便宜" class="headerlink" title="法国的冰淇凌好便宜"></a>法国的冰淇凌好便宜</h2><p>2欧6枚。</p>
<p>嗯，饭后甜点。<br><img src="http://7yusyv.com1.z0.glb.clouddn.com/2017-07/scream.jpg" alt="饭后甜点"></p>
<h2 id="突发山火"><a href="#突发山火" class="headerlink" title="突发山火"></a>突发山火</h2><p>据说这里最近两个月只下过一两场雨，干燥的空气，通透的大气和夏日的骄阳，也许还有担心消防部门申请不到钱维护消防直升机的纵火者。<br>我第一次看到了稍成规模的山火，烟雾从卡达拉舍旁一路飘到了艾克斯。</p>
<p><img src="http://7yusyv.com1.z0.glb.clouddn.com/2017-07/fire3.jpg" alt=""></p>
<p>怎么说呢，大巴在烟雾下穿过，我还是看到了比家里更蓝的天。希望随着我们这代，国家能建设得更好，也能时时拥抱清澈的蓝天吧。</p>
<p><img src="http://7yusyv.com1.z0.glb.clouddn.com/2017-07/fire2.jpg" alt=""></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://theysp.github.io/2017/07/26/2017-07-26-Cooking/" data-id="cj8d4zlfz000htkg68ty8o6wr" class="article-share-link">Partager</a>
      
        <a href="http://theysp.github.io/2017/07/26/2017-07-26-Cooking/#disqus_thread" class="article-comment-link">Commentaires</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/法国生活/">法国生活</a></li></ul>

    </footer>
  </div>
  
</article>






  
    <article id="post-2017-07-25-GUILIBRARY" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/07/25/2017-07-25-GUILIBRARY/" class="article-date">
  <time datetime="2017-07-25T09:32:13.000Z" itemprop="datePublished">2017-07-25</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/技术积累/">技术积累</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/07/25/2017-07-25-GUILIBRARY/">立即模式（Immediate mode）界面</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>为了给我的新项目做UI库的选型，我调研了一些资料，最终陷入QT和imgui的纠结中。我决定点时间来整理一下思路。</p>
<p>好吧，来看看各种人是如何说的。</p>
<h3 id="从reddit上的一篇帖子开始"><a href="#从reddit上的一篇帖子开始" class="headerlink" title="从reddit上的一篇帖子开始"></a><a href="https://www.reddit.com/r/programming/comments/5zrqcn/why_qt_and_not_imgui/#df1vcvv" target="_blank" rel="external">从reddit上的一篇帖子开始</a></h3><p>QT和imgui各有褒贬，但是无疑对于游戏UI，大家对imgui还是很赞同的。对于桌面开发，大家就不一定了，一方面如果以往对QT有较深的积累，QtQuick也是directUI的较好选项。</p>
<p>近年来，网页前端和桌面开发有融合的趋势了，主要原因是互联网从业人员的巨大，javascript受众多。特别是V8引擎的横空出世，硬件逐步发展，使得js已入了开发者的法眼。由于js天然的异步特性，恰好与传统桌面应用相符，出现了Electron，HEX这样的桌面开发框架。</p>
<p>但是dear imgui,亲爱的，从另一个完全不同的角度带来了新的界面开发模式，立即模式（Immediate mode）。与传统模式需要管理一套界面数据结构不同，在立即模式下，界面对于开发者反而是透明的了。</p>
<p>以输入一串字符串为例（伪代码），</p>
<ul>
<li><p>传统MVC模式需要同时管理所需的数据以及界面本身两套结构，虽然QT、MFC等框架实现了一系列自动化的方法，替代了我们的部分工作，但是呢，我想说和立即模式对比一下。：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//界面结构声明</span></div><div class="line">Edit a;</div><div class="line"></div><div class="line"><span class="comment">//另一处数据生命</span></div><div class="line"><span class="built_in">string</span> str_a;</div><div class="line"></div><div class="line"><span class="comment">//根据事件设置回调函数</span></div><div class="line">a.set_call_back(msg_end_edit,a.on_edit);</div><div class="line"></div><div class="line"><span class="comment">//回调函数中传回数据</span></div><div class="line">on_edit()</div><div class="line">&#123;</div><div class="line">    str_a = a;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p>立即模式，嗯，这就齐活了</p>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">string str_a;</div><div class="line">inputtext(a);</div></pre></td></tr></table></figure>
<p>立即模式主要的问题是需要持续更新界面，并从中立即获得反馈，相比之下较传统方式耗一些CPU，但是经过优化后这方面的劣势并不突出。由于这一特性，imgui特别适合用于游戏界面的开发，因为游戏的三维画面是需要实时渲染的。</p>
<h3 id="更进一步看一下使用QT的传统桌面应用开发者的看法"><a href="#更进一步看一下使用QT的传统桌面应用开发者的看法" class="headerlink" title="更进一步看一下使用QT的传统桌面应用开发者的看法"></a><a href="https://deplinenoise.wordpress.com/2017/03/05/why-qt-and-not-imgui/" target="_blank" rel="external">更进一步看一下使用QT的传统桌面应用开发者的看法</a></h3><p>这篇帖子从传统桌面应用开发者的角度将两者的优劣进行了一定的分析。</p>
<ul>
<li>重新开始的痛苦：界面元素的管理、元素拷贝、UNICODE支持等等都需要重新开始写代码。</li>
<li>重新开始真的很痛苦：字体渲染、载入icon、高DPI支持。还不知道怎么做啊。</li>
<li>。。。</li>
</ul>
<p>很具有代表性的一段，很多事情都是类似的，就像马的肩宽决定了现在铁轨主流宽度，作为IT工业一环的界面开发，也不得不背负太多历史的负担。程序员们互相支撑的过程确实很难一人说拥抱新东西大家就都有时间有精力来干这件事的。</p>
<p>好吧，既然闲着也是闲着，我决定还是趁着能折腾多经历一些，整一下imgui吧，毕竟UNITY也用的这个。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://theysp.github.io/2017/07/25/2017-07-25-GUILIBRARY/" data-id="cj8d4zlfw000etkg6w0ll4syp" class="article-share-link">Partager</a>
      
        <a href="http://theysp.github.io/2017/07/25/2017-07-25-GUILIBRARY/#disqus_thread" class="article-comment-link">Commentaires</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/imgui/">imgui</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/opengl/">opengl</a></li></ul>

    </footer>
  </div>
  
</article>






  
    <article id="post-2017-07-23" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/07/23/2017-07-23/" class="article-date">
  <time datetime="2017-07-23T17:06:52.000Z" itemprop="datePublished">2017-07-23</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/技术积累/">技术积累</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/07/23/2017-07-23/">OpenGL 2 了解计算机三维渲染过程</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>这篇文章其实是阅读了谷歌排名第一的OpenGL教程的入门部分总结的读后感。<br><a href="https://learnopengl.com/" target="_blank" rel="external">原文在这里</a>, <a href="https://learnopengl-cn.github.io/" target="_blank" rel="external">中文版翻译在这里</a>，<a href="https://www.patreon.com/learnopengl" target="_blank" rel="external">原文作者在这里</a></p>
<p>以前经常有大厚本的OpenGL红宝书啦、24入门啦、3个月快速开发啦这些东西，但是真正感觉还是这次看的资料有用一些。这一份东西把三维图形学从里到外讲了个透。</p>
<p>看这个教程的入门部分，我觉得最关键的是对显卡渲染流程的了解，总结在本文中供之后借鉴。借用一下教程中的图，是下面这个样子的：</p>
<p><img src="http://7yusyv.com1.z0.glb.clouddn.com/2017-07/pipeline.png" alt=""></p>
<h2 id="1-VERTEX-DATA"><a href="#1-VERTEX-DATA" class="headerlink" title="1. VERTEX DATA"></a>1. VERTEX DATA</h2><p>VERTEX DATA中可包含任意你需要的内容，包括模型顶点坐标、顶点属性（颜色、材质、纹理坐标、<span style="color:#de2020">任意其他属性</span>）。有了这些数据，可以在渲染的过程中做很多的事情。</p>
<h2 id="2-VERTEX-SHADER"><a href="#2-VERTEX-SHADER" class="headerlink" title="2. VERTEX SHADER"></a>2. VERTEX SHADER</h2><p>这个步骤对每个参与渲染的顶点都做一次处理（SHADER其实就是一个小程序，其输入就是这每一个对象）。</p>
<p>这里只要出现了SHADER，就说明这个是我们可以控制的部分了，这个过程可以做两类事情：<br>    生成渲染需要的顶点坐标，这个顶点坐标根据渲染的类型不同含义不同。如果是三角形渲染方式，那么每3个坐标为一个三角形的三个定点，如果是线段渲染，那每两个坐标为线段的两端点。<br>    进行其他处理，将数据传递给之后的SHADER。</p>
<p>在这一步骤中，通过VERTEX SHADER进行顶点生成的目标是将需要可视化的内容放到(-1,-1,-1)到(1,1,1)中。及标准化设备坐标(Normalized Device Coordinate, NDC)中。形象一点说，OpenGL其实就是一个2X2X2的鱼缸，OpenGL渲染过程就是把鱼缸里的东西全部压扁到鱼缸的一个面形成图像。为了实现我们需要的视角，我们需要透过种种坐标变换，将实际三维空间按我们定义的视角映射到这个2X2X2的标准设备空间中。</p>
<h2 id="3-SHAPE-ASSEMBLY"><a href="#3-SHAPE-ASSEMBLY" class="headerlink" title="3. SHAPE ASSEMBLY"></a>3. SHAPE ASSEMBLY</h2><p>就是将步骤1中生成的顶点按渲染方式组装成几何体，比如，如果渲染方式是三角形，这里会将每3个顶点组装成一个三角形。</p>
<h2 id="4-GEOMETRY-SHADER"><a href="#4-GEOMETRY-SHADER" class="headerlink" title="4. GEOMETRY SHADER"></a>4. GEOMETRY SHADER</h2><p>这个步骤对每个前面步骤组装的集合体都做一个处理。</p>
<p>GEOMETRY SHADER默认可不设置，那么就会直接把ASSEMBLE后的SHAPE直接发给后面的步骤了。</p>
<p>GEOMETRY SHADER的输入就是前面ASSEMBLE后的个几何基本体（点/线段/三角形)。其可做的操作就是添加任意类型的几何基本体到当前的图形中，并交给后面的步骤处理。</p>
<h2 id="5-RASTERIZATION"><a href="#5-RASTERIZATION" class="headerlink" title="5. RASTERIZATION"></a>5. RASTERIZATION</h2><p>在这个步骤，OpenGL底层自动对所有几何按照(-1,-1,-1)到(1,1,1)这个范围进行裁剪。并将所有的基本集合体映射到光栅上，形成一个个片段（可以理解为一个个像素点）。这每一个片段都将在下一步骤进行处理。</p>
<p>这每个片段都将包含在步骤1的VERTEX SHADER中输出的属性值。对于非顶点的图形位置，其属性值是其所在基本体各定点的属性值的线性插值。<br>比如三角形内部点的纹理坐标就是各顶点纹理坐标的插值。用户也可自定义一些属性，比如三角形各顶点的属性也可以就是其坐标，那么内部顶点的属性也就会处理成其真实坐标。</p>
<h2 id="6-FRAGMENT-SHADER"><a href="#6-FRAGMENT-SHADER" class="headerlink" title="6. FRAGMENT SHADER"></a>6. FRAGMENT SHADER</h2><p>在这个步骤，对每个片段（可理解为像素点）进行处理，其输入就是VERTEX SHADER传来的属性。输出为一个4通道颜色信息。</p>
<h2 id="7-TESETS-AND-BLENDING"><a href="#7-TESETS-AND-BLENDING" class="headerlink" title="7. TESETS AND BLENDING"></a>7. TESETS AND BLENDING</h2><p>根据深度等信息，将所有FRAGMENT混合成一张图像。</p>
<blockquote>
<p>Shader程序是由GLSL语言编写的子程序。这些子程序以字符串的形式传递给OpenGL的API，并由OpenGL的API进行编译、链接，并在三维渲染流程中被调用。Shader给予了程序员极大的自由度来操作三维渲染的过程。GLSL其实是在2004年才正式引入OpenGL 2.0的。具体可以参考<a href="https://en.wikipedia.org/wiki/OpenGL_Shading_Language" target="_blank" rel="external">维基百科</a>。</p>
</blockquote>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://theysp.github.io/2017/07/23/2017-07-23/" data-id="cj8d4zlfo000btkg6p1m5e18m" class="article-share-link">Partager</a>
      
        <a href="http://theysp.github.io/2017/07/23/2017-07-23/#disqus_thread" class="article-comment-link">Commentaires</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/opengl/">opengl</a></li></ul>

    </footer>
  </div>
  
</article>






  
    <article id="post-2017-07-22" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/07/22/2017-07-22/" class="article-date">
  <time datetime="2017-07-22T07:05:07.000Z" itemprop="datePublished">2017-07-22</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/07/22/2017-07-22/">人人人</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>来这里，结识了不少人哦，对团队的同事了解也更深入了。</p>
<h2 id="房东"><a href="#房东" class="headerlink" title="房东"></a>房东</h2><p>为了拿房租，房东和我在ITER入口会和了。见面后，她和我絮絮叨叨说了很多事情哦。</p>
<p>房东叫伊莲娜，在20年前博士毕业，研究的方向是植物学。后面她放弃了研究（我猜可能是家庭的关系吧）。她的女儿是00后，据她说圆圆胖胖的，但无论如何是自己的女儿啊，还是要爱她的。她在CEA做security方面的工作，我一开始还以为是安保，一解释原来是各种化学品药剂之类的安全保障工作。所以她就觉得女儿整天化妆啦，面膜啦非常不健康。<br>哈，一代代间总是有代沟的。</p>
<h2 id="ITER副总干事"><a href="#ITER副总干事" class="headerlink" title="ITER副总干事"></a>ITER副总干事</h2><p>初识金老师是在走道上，看到他正拎着行李准备进门。一见面就很平易近人地问我是否刚到啊之类的。我进去后，他找我问了我们干啥的，并很热心地给我看他正在推进的工作。嗯，还好我之前并不知道他是副总干事，不然也不会那么找他问这问那的。他介绍了ITER知识产权登记的内容，希望能够在等级好后能够为将来聚变堆的建设提供良好的知识储备，以达到ITER初始的目标。</p>
<p>最近在看建筑史，里面讲了哥特式建筑的由来。从出现之初，教堂这样的传教场所就是为了营造一种神性的氛围而存在的。而在几百年（快一千年了）前，随着新材料的引入，修道院的僧侣们开始了一种新的营造方式，让更多光透入，并让拱顶更高并添加更多的天窗。确实，走进那样的建筑不由得不感叹，肯定是神迹才催生了那样宏伟的建筑。</p>
<p>但是在ITER总部，这里走廊的天花板我伸手就能碰到，而总干事的办公室就在核分析组同一层。对原理清晰理解的科学家和工程师正用自己的智慧脚踏实地地设计、建造这庞然大物。这里并没有必要营造巴黎圣母院那样的氛围哈。</p>
<h2 id="倪师兄"><a href="#倪师兄" class="headerlink" title="倪师兄"></a>倪师兄</h2><p>嗯，其实话并不多，属于实干的人。对ITER的组织方式，他觉得目前ITER主要还是做集成，真正的技术，比如配方、工艺、软件还都是掌握在各参与方手中的。</p>
<h2 id="Michael"><a href="#Michael" class="headerlink" title="Michael"></a>Michael</h2><p>Michael其实挺搞笑的，在办公室的气氛很轻松，他一直一脸“我好累”的表情，但对各位成员都很关照，并能够及时解决各种问题。</p>
<h2 id="Akardy"><a href="#Akardy" class="headerlink" title="Akardy"></a>Akardy</h2><p>他来这里是为了解决一些Upper Port核分析任务还未完成的问题。<br>上次来我们这里参会，还很感谢我们的招待o。我给他说我们是best freind嘛。</p>
<h2 id="突尼斯来的Sllm"><a href="#突尼斯来的Sllm" class="headerlink" title="突尼斯来的Sllm"></a>突尼斯来的Sllm</h2><p>班车上碰到的哦，他来这里快一个月了。他是做ITER的ICP系统的，IDM就是其中的一个很小的子系统。他所负责的东西还包括ITER内的控制等等。<br>突尼斯总共200万人，所以研究经费不多，这也是他博士毕业后没有继续从事研究工作的原因。<br>所以说，中国虽庞大的基数能够支撑起我们这些研究人员的经费，也是感觉挺幸运的。</p>
<p>据他介绍，法语是突尼斯的第二语言，难得有人说英语的，他的英语基本上是靠大量的阅读以及到国外的交流中学习到的。但是他很爱自己的国家啊，虽然短期来这边出差，但是还是坚决要回去的哦，尽管法国这里他也挺习惯的，但是对于这里他并没有太多的留恋。</p>
<p>对于ITER散漫的工作作风，他也是颇有微词的：早上八点半到ITER还去食堂吃个早饭（他们这里叫餐厅是canting，感觉是从中国舶来的？），9点到办公室打开电脑工作1小时，好，去coffee break了，完了回来再工作半小时，好，吃中饭了。下午1点多姗姗来迟，又来两次coffee break，就下班了。<br>说在意大利啦也一样，上午9点开会大家10点到，到了不行，要coffee break，好嘛，开会就挪到下午两点了。</p>
<p>他觉得英法意德里，就德国人工作最认真了，并不在于工作时间长，而是在于每件事都要找到最好的方法(best practice)，这样效率颇高。</p>
<h2 id="西班牙来的冷却系统专家"><a href="#西班牙来的冷却系统专家" class="headerlink" title="西班牙来的冷却系统专家"></a>西班牙来的冷却系统专家</h2><p>哈，一个很爱笑的汉子。他找了ITER的工作，觉得很因垂丝汀，把老婆孩子一并都带来了。所幸他妻子现在主要是经营在youtube上的一个打毛衣的栏目，比当服务员之类的好多了，也很自由，所以能到处跑。小孩刚一岁，完全没概念，所以也无所谓了。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://theysp.github.io/2017/07/22/2017-07-22/" data-id="cj8d4zlff0006tkg6xzvbe63o" class="article-share-link">Partager</a>
      
        <a href="http://theysp.github.io/2017/07/22/2017-07-22/#disqus_thread" class="article-comment-link">Commentaires</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/法国生活/">-法国生活</a></li></ul>

    </footer>
  </div>
  
</article>






  
    <article id="post-2017-07-19" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/07/19/2017-07-19/" class="article-date">
  <time datetime="2017-07-19T18:31:09.000Z" itemprop="datePublished">2017-07-19</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/法国生活/">法国生活</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/07/19/2017-07-19/">三天大乱炖</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>由于一些事情，博物馆没有去。延迟到本周末吧。三天的流水账混着写也别有风味哦。<br>周末时处理完事情，思考了人生后，怀着侥幸的心理去了博物馆，但是已经关门啦。这位老太太的照片非常给力，我给留下来了。<br><img src="http://7yusyv.com1.z0.glb.clouddn.com/2017-07/before_museum.jpg" alt=""><br>收拾完周末狂欢（无）的心情，我就前往ITER啦。<br>发达城市的早晨从洗地车的轰鸣中开始了。<br><img src="http://7yusyv.com1.z0.glb.clouddn.com/2017-07/wipingmachine.jpg" alt=""><br>左右对比一下还是觉得洗的挺干净的哦。<br><img src="http://7yusyv.com1.z0.glb.clouddn.com/2017-07/洗地效果.jpg" alt=""></p>
<p><img src="http://7yusyv.com1.z0.glb.clouddn.com/2017-07/自行车巡警.jpg" alt="自行车巡警"><br>我所在的办公室人不多，我的桌子正对着法国的乡村，景观开阔，工作一天也是心情舒畅的。<br><img src="http://7yusyv.com1.z0.glb.clouddn.com/2017-07/viewfrommyoffice.jpg" alt="办公室全貌一览"><br>嗯，ITER现在进展飞快，托卡马克大厅已经快建2层了，氚工厂、变电站都初现模样了。也能看到远处的线圈绕制大厅，有一种此生能看到聚变发电站的憧憬了。由于签了协议不准拍照，我就不放图了。<br>忙碌完一天，回程的路上偶然看到这个雕像，毫不留情地拍下来了，颇有一种外星来客的感觉。<br><img src="http://7yusyv.com1.z0.glb.clouddn.com/2017-07/归途雕像.jpg" alt=""><br>去超市的路上，经过了很多条小巷，其实是我特意走的小巷啦。看到窗台的花朵<br><img src="http://7yusyv.com1.z0.glb.clouddn.com/2017-07/flowerjail.jpg" alt=""><br>看到名胜古迹的说明<br><img src="http://7yusyv.com1.z0.glb.clouddn.com/2017-07/another%20place.jpg" alt=""><br>看到披着夕阳的树冠<br><img src="http://7yusyv.com1.z0.glb.clouddn.com/2017-07/anotherstreet.jpg" alt=""><br>延伸到远方的街道<br><img src="http://7yusyv.com1.z0.glb.clouddn.com/2017-07/longlongstreat.jpg" alt=""><br>看不到尽头的长街<br><img src="http://7yusyv.com1.z0.glb.clouddn.com/2017-07/longstreet2.jpg" alt=""><br>看不到尽头的长街<br><img src="http://7yusyv.com1.z0.glb.clouddn.com/2017-07/long_straight_street.jpg" alt=""><br>和掩藏在小巷深处的餐厅<br><img src="http://7yusyv.com1.z0.glb.clouddn.com/2017-07/hiden_restaurant.jpg" alt=""><br>但是这一切，都没有品尝自己做出的辣椒炒肉的美味带来更多的幸福<br><img src="http://7yusyv.com1.z0.glb.clouddn.com/2017-07/辣椒炒肉.jpg" alt=""></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://theysp.github.io/2017/07/19/2017-07-19/" data-id="cj8d4zlf70005tkg6begehki6" class="article-share-link">Partager</a>
      
        <a href="http://theysp.github.io/2017/07/19/2017-07-19/#disqus_thread" class="article-comment-link">Commentaires</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/法国生活/">法国生活</a></li></ul>

    </footer>
  </div>
  
</article>






  
    <article id="post-2017-07-16-opengl-history" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/07/16/2017-07-16-opengl-history/" class="article-date">
  <time datetime="2017-07-16T13:14:32.000Z" itemprop="datePublished">2017-07-16</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/技术积累/">技术积累</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/07/16/2017-07-16-opengl-history/">OpenGL 1 从OpenGL的角度看三维计算机图形库的发展</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>对于可视化，从来没有系统地了解相关的知识，对相关工作确实也没有切实有效的思路。因此决定趁在法国期间系统地看一下相关的知识。在此作一些记录也算是督促自己的学习吧。</p>
<p>就从OpengGL这一历史悠久的API库开始我的旅程吧。</p>
<p>以史为鉴可以明得失，这次我不再跳过history了，从<a href="http://openglbook.com/chapter-0-preface-what-is-opengl.html" target="_blank" rel="external">OpengGL官网的对其历史的介绍的文章</a>一路看下来。</p>
<p>OpenGL是对底层图形硬件的封装，是对程序员开放的一些接口的规范以及各大厂商的底层实现的集合。<br>这篇文章从使用灯泡/纸带的时代说起，一直讲到了和Direct3D相爱相杀的过程中互取所长，进化至今形成OpengGL3.1版本的过程。</p>
<h2 id="从无到有"><a href="#从无到有" class="headerlink" title="从无到有"></a>从无到有</h2><p>计算机发明之初，技术人员和科学家们仅能够通过连着计算机的灯泡或者长长的纸带来获取计算机输出的信息。翻译难度无异于现在人肉识别二维码。一方面刚发明的计算机的计算能力略弱，如果还要从中抽一部分来翻译输出也嫌浪费；另一方面这星辰大海还等待能人异士的到来。</p>
<p>Ferdinand Braun在1897年发明了显像管（CRT），是近一个世纪的显示设备的主要形态。1951年MIT在为海军研发Whirlwind计算机期间，使用了CRT进行了简单的程序输出，从而避免了翻译灯泡和纸带等冗余工作。尽管Whirlwind由于运行成本过高而不甚成功，但是作为一个开创式的里程碑，CRT在之后的半个世纪成为了计算机输出的主要设备。很多时候，要理解一件事情还是需要看一看实物，比如要知道，当时的计算机的内存是下面这玩意~~</p>
<p><img src="https://upload.wikimedia.org/wikipedia/commons/thumb/1/19/8868-Project-Whirlwind-CRMI.JPG/220px-8868-Project-Whirlwind-CRMI.JPG" alt="Whirlwind内存模块"></p>
<p>此后，1961年Ivan Sutherland发明了可和计算机交互的Sketchpad，成为了鼠标的前身。从此，计算机不仅可以看，还可以实时交互地看，往后一切这一切就飞速发展起来了，直到可视化可以媲美甚至超越现实，而与这虚拟的现实的交互可以媲美现实。。。</p>
<h2 id="飞速发展的个人电脑"><a href="#飞速发展的个人电脑" class="headerlink" title="飞速发展的个人电脑"></a>飞速发展的个人电脑</h2><p>随着计算机的计算能力的飞速发展，计算机发展至四代计算机，出现个人计算机。为了让计算机能够更容易地为普通人掌握，20世纪80年代计算机的交互界面由命令行的方式发展出了图形交互界面。嗯？和我的时间线不太一致，我上初中时香港都回归了，都快来千年虫了我们学校还用着DOS操作系统。</p>
<p>当然，80年代单机游戏主要都运行在特殊的硬件上（FC啦之类的）。而三维图形主要还是应用在可视化领域，因为个人电脑那点运算能力还不够格运行实时的三维图形系统。</p>
<p>而这一状况到90年代得到了极大的改观，因为这时个人电脑的计算能力有了长足的进步，而游戏也开始做到PC上了。比如划时代的3D游戏Doom。</p>
<p>这个时候有啥问题呢，主要就是不同的图形系统是运行在不同的硬件上的。各家硬件厂商是卖电脑送软件，程序员是直接基于各自的程序库来直接操作图形硬件的。这样很多人的青春都花费在了给不同的硬件做移植上了。</p>
<h2 id="OpenGL的第一个时代"><a href="#OpenGL的第一个时代" class="headerlink" title="OpenGL的第一个时代"></a>OpenGL的第一个时代</h2><p>OpenGL的前身是Silicon Graphics（SGI）开发的IRIS GL，当时SGI凭借自身硬件系统的性能优势，使IRIS GL成为了业界事实上的3D图形库标准。但是尽管该图形库非常流行，但是由于SGI的图形库与其硬件深度结合，其竞争对手均使用了各自的程序接口并逐渐追上了原本处于领先位置的SGI。</p>
<p>这样的情况下，SGI棋走险招，在1992年将IRIS GL中与计算机图形不相关的部分剥离形成了OpenGL并对外开放。OpenGL就此向跨平台、标准实时图形库的方向迈进了。</p>
<p>从此，软件开发商（操作系统开发商）必须在他们的系统上提供OpengGL实现；而硬件开发商需要对OpenGL提供驱动支持。OpenGL就此走上了康庄大道，程序员和老板们也都为能用上好用的图形接口程序而欢呼雀跃。</p>
<h2 id="OpenGL的特点"><a href="#OpenGL的特点" class="headerlink" title="OpenGL的特点"></a>OpenGL的特点</h2><h3 id="第一个特点就是灵活"><a href="#第一个特点就是灵活" class="headerlink" title="第一个特点就是灵活"></a>第一个特点就是灵活</h3><p>灵活是因为SGI开放的并不是源码，而是一些实现这一套OpenGL的API的准则。因此不同的软件平台可以有不同的实现。而实现的不同并不影响基于这同一套API的应用级程序的实现。</p>
<p>此外，OpenGL支持扩展，不同的硬件供应商可以根据特定的需求提供扩展的API。当然啦，这种东西可以说灵活了，对跨平台的程序又是一道移植的门槛哦。</p>
<h3 id="第二个特点是开放"><a href="#第二个特点是开放" class="headerlink" title="第二个特点是开放"></a>第二个特点是开放</h3><p>开放嘛，就不提了，各种硬件商、软件商都可以实现自己的OpenGL底层和API。横跨ios, linux, windows等平台，甚至衍生出ES和WebGL这种种体系。你说不开放我把键盘吃了。</p>
<h2 id="和Direct3D的故事"><a href="#和Direct3D的故事" class="headerlink" title="和Direct3D的故事"></a>和Direct3D的故事</h2><p>微软为了稳固其桌面操作系统的地位，硬是收购了RenderMorphics 并将其Reality Lab捋了捋形成了Direct3D。在发展之初Direct3D不给力阿，程序员怨声载道，不得已微软还是实现了一套1.1版本的OpenGL库，当然啦，这是最后一次他们更新的OpenGL。</p>
<p>为了杀人于无形，微软搞了一个MCD，本来这是个挺好的东西，可以让用户分离硬件加速与软件计算方式，但是呢，不让OpenGL用硬件加速方式，硬生生把OpenGL搞成GDI一样的效率。当然啦，SGI不是吃素的，搞出一个ICD，让OpenGL还是可以在Windows上进行硬件加速，哈，就是这样，OpenGL和Direct在windows上开始了长期的竞争。</p>
<p>微软不是吃素的，应硬件的发展率先在Direct 3D上搞出了非立即模式的渲染方式，发展了shaders方法等等。而感觉OpenGL这样的组织方式反应略迟缓，在这一点上晚了一步哦。</p>
<p>为了理解立即模式的缺点，这是原话</p>
<blockquote>
<p>To get things to render on the screen up until this point, programmers issued lists of commands from their program that would be interpreted by the GPU, called the immediate mode. This methodology performed fine for smaller data sets, but with larger data sets, performance was hindered by the performance of the CPU since all function calls originated from the program itself.</p>
</blockquote>
<h2 id="奋起直追到4-0"><a href="#奋起直追到4-0" class="headerlink" title="奋起直追到4.0"></a>奋起直追到4.0</h2><p>最好的朋友其实是敌人，这一点我们老板也经常提起。就像谷歌之于百度，像苹果之于三星。<br>Direct3D简直是教OpenGL的最好的老师，OpenGL在3.1版本中逐渐废弃了立即模式，而在4.0中，干脆已不支持立即模式。<br>现在开始学OpenGL的话，可以抛弃以前那一套立即模式的API了，让我们拥抱新的支持大数据量的buffer和shaders吧。</p>
<h2 id="结语"><a href="#结语" class="headerlink" title="结语"></a>结语</h2><p>这里面一句话说的非常好：<em>The requirement for visual feedback is so important that it is hard to acknowledge the existence of something if you cannot see it. Bacteria, for instance, were purely speculative before their visual discovery in the seventeenth century by Antonie van Leeuwenhoek who invented the microscope, but became an integral part of modern science.</em>，可视化对于人来说，是对现实存在的感知的重要的不可替代的途径。</p>
<p>看了这么久，总想一两句总结一下这段历史。我想应该也就是两句话吧，一方面，程序员要用得爽、一方面架构设计要能支持高效的运算。哼，这不是废话嘛，老了，只能说说废话了。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://theysp.github.io/2017/07/16/2017-07-16-opengl-history/" data-id="cj8d4zlej0000tkg6p0c2bnye" class="article-share-link">Partager</a>
      
        <a href="http://theysp.github.io/2017/07/16/2017-07-16-opengl-history/#disqus_thread" class="article-comment-link">Commentaires</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/opengl/">opengl</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/历史/">历史</a></li></ul>

    </footer>
  </div>
  
</article>






  


  <nav id="page-nav">
    <a class="extend prev" rel="prev" href="/">&laquo; __('prev')</a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><a class="extend next" rel="next" href="/page/3/">__('next') &raquo;</a>
  </nav>
</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Catégories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/“法国生活/">“法国生活"</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/学术积累/">学术积累</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/技术积累/">技术积累</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/法国生活/">法国生活</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Mot-clés</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/法国生活/">-法国生活</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ITER/">ITER</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/LeetCode/">LeetCode</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Opengl常见错误/">Opengl常见错误</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/imgui/">imgui</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/leetcode/">leetcode</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/opengl/">opengl</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/万事开头难/">万事开头难</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/不太好的事情/">不太好的事情</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/历史/">历史</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/参会/">参会</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/尼斯/">尼斯</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/并行计算/">并行计算</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/摩纳哥/">摩纳哥</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/斯洛文尼亚/">斯洛文尼亚</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/法国生活/">法国生活</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/电影/">电影</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/统计学/">统计学</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/美剧/">美剧</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/马赛/">马赛</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Nuage de mot-clés</h3>
    <div class="widget tagcloud">
      <a href="/tags/法国生活/" style="font-size: 10px;">-法国生活</a> <a href="/tags/ITER/" style="font-size: 10px;">ITER</a> <a href="/tags/LeetCode/" style="font-size: 10px;">LeetCode</a> <a href="/tags/Opengl常见错误/" style="font-size: 10px;">Opengl常见错误</a> <a href="/tags/imgui/" style="font-size: 10px;">imgui</a> <a href="/tags/leetcode/" style="font-size: 10px;">leetcode</a> <a href="/tags/opengl/" style="font-size: 20px;">opengl</a> <a href="/tags/万事开头难/" style="font-size: 13.33px;">万事开头难</a> <a href="/tags/不太好的事情/" style="font-size: 10px;">不太好的事情</a> <a href="/tags/历史/" style="font-size: 10px;">历史</a> <a href="/tags/参会/" style="font-size: 10px;">参会</a> <a href="/tags/尼斯/" style="font-size: 10px;">尼斯</a> <a href="/tags/并行计算/" style="font-size: 10px;">并行计算</a> <a href="/tags/摩纳哥/" style="font-size: 10px;">摩纳哥</a> <a href="/tags/斯洛文尼亚/" style="font-size: 10px;">斯洛文尼亚</a> <a href="/tags/法国生活/" style="font-size: 16.67px;">法国生活</a> <a href="/tags/电影/" style="font-size: 10px;">电影</a> <a href="/tags/统计学/" style="font-size: 10px;">统计学</a> <a href="/tags/美剧/" style="font-size: 10px;">美剧</a> <a href="/tags/马赛/" style="font-size: 10px;">马赛</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/10/">October 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/09/">September 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/08/">August 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/07/">July 2017</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Articles récents</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2017/10/04/2017-10-04-something-fun/">实时剂量计算</a>
          </li>
        
          <li>
            <a href="/2017/10/02/2017-10-02-leetcode-contest-52/">身在法国凌晨起不来只能之后慢慢做题解馋的leetcode竞赛</a>
          </li>
        
          <li>
            <a href="/2017/10/01/2017-10-01/">2017-10-01</a>
          </li>
        
          <li>
            <a href="/2017/09/25/2017-09-26-suits-view-opinions/">suits观后感</a>
          </li>
        
          <li>
            <a href="/2017/09/22/2017-09-22-Students-T-test/">学生t检验，Student&#39;s T Test</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2017 ysp<br>
      Propulsé by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    
<script>
  var disqus_shortname = 'theysp-github-io';
  
  (function(){
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/count.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>


<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>

  </div>
</body>
</html>